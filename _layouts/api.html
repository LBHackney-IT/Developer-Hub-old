---
layout: default
---
<script>

    checkIfUserIsAuthenticated();
  
    function checkIfUserIsAuthenticated() {
      const poolData = {
        UserPoolId : _config.cognito.userPoolId,
        ClientId : _config.cognito.clientId
      };
  
      var userPool = new AmazonCognitoIdentity.CognitoUserPool(poolData);
      var cognitoUser = userPool.getCurrentUser();
  
      if (cognitoUser != null) {
          cognitoUser.getSession(function(err, session) {
              if (err) {
                redirectTo('/developer/login');
              }
              console.log('session validity: ' + session.isValid());
        //Set the profile info
        cognitoUser.getUserAttributes(function(err, result) {
          if (err) {
            console.log(err);
            return;
          }
          console.log(result);
          document.getElementById("email_value").innerHTML = 'Welcome '+ result[3].getValue();
        });
  
          });
      } else {
        redirectTo('/developer/login');
      }
    }
    </script>
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h1 class="govuk-heading-xl">{{ page.title }}</h1>
  </div>
  <div class="govuk-grid-column-one-third align-right">
    <h1 class="govuk-tag govuk-tag--{% if page.compliant %}positive{% else %}negative{% endif %}">{{ page.compliant_message }}</h1>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <table class="govuk-table">
      <tbody class="govuk-table__body">
        <tr class="govuk-table__row">
          <th class="govuk-table__header" scope="row">Available in Staging</th>
          <td class="govuk-table__cell">{% if page.staging_available %}Yes{% else %}No{% endif %}</td>
        </tr>
        {% if page.staging_available %}
        <tr class="govuk-table__row">
          <th class="govuk-table__header" scope="row">Staging Base URL</th>
          <td class="govuk-table__cell">{{ page.staging_url }}</td>
        </tr>
        {% endif %}
        <tr class="govuk-table__row">
          <th class="govuk-table__header" scope="row">Available in Production</th>
          <td class="govuk-table__cell">{% if page.production_available %}Yes{% else %}No{% endif %}</td>
        </tr>
        {% if page.production_available %}
        <tr class="govuk-table__row">
          <th class="govuk-table__header" scope="row">Production Base URL</th>
          <td class="govuk-table__cell">{{ page.production_url }}</td>
        </tr>
        {% endif %}
        {% if page.github_url %}
        <tr class="govuk-table__row">
          <th class="govuk-table__header" scope="row">GitHub URL</th>
          <td class="govuk-table__cell">{{ page.github_url }}</td>
        </tr>
        {% endif %}
      </tbody>
    </table>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    {{ page.content }}
  </div>
</div>
